{% extends 'school_admin_URLs/school_admin_temp.html' %}


{% block title %}
School Admin | Student Attendance
{% endblock title %}

{% block mainbody %}


<style>
    table {
        border-collapse: collapse;
        width: 100%;
    }

    th,
    td {
        border: 1px solid black;
        padding: 8px;
        text-align: left;
    }

    th {
        background-color: lightgray;
    }

    .total-row {
        font-weight: bold;
    }
</style>


<section class="form-02-main s-admin-page">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="_lk_de">
                    <div class="form-04-main">
                        <div class="logo">
                            <img src="/static/images/public_images/user.png">
                        </div>
                        <h1 class="text-center">Student Attendance</h1>
                        <br><br>



                        <table>
                            <tr>
                                <th>Name</th>
                                <th>ID</th>
                                <th>WhatsApp #</th>
                                <th>Class</th>
                                <th>Attendance</th>

                            </tr>

                            {% for row in attendance %}
                            {% if ((( total_attendance[1][0] - row[4]) / total_attendance[1][0]) * 100) < 97  %}
                                
                            
                            <tr>
                                <td>{{ row[0] }}</td>
                                <td>{{ row[3] }}</td>
                                <td>{{ row[2] }}</td>
                                <td>{{ row[1] }}</td>
                                {% if row[4] == 0 %}

                                <td>{{ 100 }} % {{row[4]}}</td>

                                {% endif %}

                                {% if row[4] != 0 %}

                                        {% for class in total_attendance %}

                                        {% if class[1] == row[1] %}
                                                <td>{{ '{:.1f}'.format((( class[0] - row[4]) / class[0]) * 100) }} %</td>
                                            {% endif %}
                                            {% endfor %}
                                            
                                            
                                            {% endif %}
                            </tr>
                            {% endif %}
                            {% endfor %}
                            
                        </table>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
{% endblock mainbody %}